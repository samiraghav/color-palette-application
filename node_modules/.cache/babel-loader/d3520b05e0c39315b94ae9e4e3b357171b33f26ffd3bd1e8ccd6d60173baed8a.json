{"ast":null,"code":"const Color = require('../Color');\nconst {\n  clip_rgb\n} = require('../utils');\nconst {\n  pow,\n  sqrt,\n  PI,\n  cos,\n  sin,\n  atan2\n} = Math;\nmodule.exports = function (colors) {\n  let mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'lrgb';\n  let weights = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const l = colors.length;\n  if (!weights) weights = Array.from(new Array(l)).map(() => 1);\n  // normalize weights\n  const k = l / weights.reduce(function (a, b) {\n    return a + b;\n  });\n  weights.forEach((w, i) => {\n    weights[i] *= k;\n  });\n  // convert colors to Color objects\n  colors = colors.map(c => new Color(c));\n  if (mode === 'lrgb') {\n    return _average_lrgb(colors, weights);\n  }\n  const first = colors.shift();\n  const xyz = first.get(mode);\n  const cnt = [];\n  let dx = 0;\n  let dy = 0;\n  // initial color\n  for (let i = 0; i < xyz.length; i++) {\n    xyz[i] = (xyz[i] || 0) * weights[0];\n    cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n    if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n      const A = xyz[i] / 180 * PI;\n      dx += cos(A) * weights[0];\n      dy += sin(A) * weights[0];\n    }\n  }\n  let alpha = first.alpha() * weights[0];\n  colors.forEach((c, ci) => {\n    const xyz2 = c.get(mode);\n    alpha += c.alpha() * weights[ci + 1];\n    for (let i = 0; i < xyz.length; i++) {\n      if (!isNaN(xyz2[i])) {\n        cnt[i] += weights[ci + 1];\n        if (mode.charAt(i) === 'h') {\n          const A = xyz2[i] / 180 * PI;\n          dx += cos(A) * weights[ci + 1];\n          dy += sin(A) * weights[ci + 1];\n        } else {\n          xyz[i] += xyz2[i] * weights[ci + 1];\n        }\n      }\n    }\n  });\n  for (let i = 0; i < xyz.length; i++) {\n    if (mode.charAt(i) === 'h') {\n      let A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n      while (A < 0) A += 360;\n      while (A >= 360) A -= 360;\n      xyz[i] = A;\n    } else {\n      xyz[i] = xyz[i] / cnt[i];\n    }\n  }\n  alpha /= l;\n  return new Color(xyz, mode).alpha(alpha > 0.99999 ? 1 : alpha, true);\n};\nconst _average_lrgb = (colors, weights) => {\n  const l = colors.length;\n  const xyz = [0, 0, 0, 0];\n  for (let i = 0; i < colors.length; i++) {\n    const col = colors[i];\n    const f = weights[i] / l;\n    const rgb = col._rgb;\n    xyz[0] += pow(rgb[0], 2) * f;\n    xyz[1] += pow(rgb[1], 2) * f;\n    xyz[2] += pow(rgb[2], 2) * f;\n    xyz[3] += rgb[3] * f;\n  }\n  xyz[0] = sqrt(xyz[0]);\n  xyz[1] = sqrt(xyz[1]);\n  xyz[2] = sqrt(xyz[2]);\n  if (xyz[3] > 0.9999999) xyz[3] = 1;\n  return new Color(clip_rgb(xyz));\n};","map":{"version":3,"names":["Color","require","clip_rgb","pow","sqrt","PI","cos","sin","atan2","Math","module","exports","colors","mode","arguments","length","undefined","weights","l","Array","from","map","k","reduce","a","b","forEach","w","i","c","_average_lrgb","first","shift","xyz","get","cnt","dx","dy","push","isNaN","charAt","A","alpha","ci","xyz2","col","f","rgb","_rgb"],"sources":["C:/Users/Sai/Desktop/REACT/youtube-extension/node_modules/chroma-js/src/generator/average.js"],"sourcesContent":["const Color = require('../Color');\nconst {clip_rgb} = require('../utils');\nconst {pow, sqrt, PI, cos, sin, atan2} = Math;\n\nmodule.exports = (colors, mode='lrgb', weights=null) => {\n    const l = colors.length;\n    if (!weights) weights = Array.from(new Array(l)).map(() => 1);\n    // normalize weights\n    const k = l / weights.reduce(function(a, b) { return a + b; });\n    weights.forEach((w,i) => { weights[i] *= k })\n    // convert colors to Color objects\n    colors = colors.map(c => new Color(c));\n    if (mode === 'lrgb') {\n        return _average_lrgb(colors, weights)\n    }\n    const first = colors.shift();\n    const xyz = first.get(mode);\n    const cnt = [];\n    let dx = 0;\n    let dy = 0;\n    // initial color\n    for (let i=0; i<xyz.length; i++) {\n        xyz[i] = (xyz[i] || 0) * weights[0];\n        cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n        if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n            const A = xyz[i] / 180 * PI;\n            dx += cos(A) * weights[0];\n            dy += sin(A) * weights[0];\n        }\n    }\n\n    let alpha = first.alpha() * weights[0];\n    colors.forEach((c,ci) => {\n        const xyz2 = c.get(mode);\n        alpha += c.alpha() * weights[ci+1];\n        for (let i=0; i<xyz.length; i++) {\n            if (!isNaN(xyz2[i])) {\n                cnt[i] += weights[ci+1];\n                if (mode.charAt(i) === 'h') {\n                    const A = xyz2[i] / 180 * PI;\n                    dx += cos(A) * weights[ci+1];\n                    dy += sin(A) * weights[ci+1];\n                } else {\n                    xyz[i] += xyz2[i] * weights[ci+1];\n                }\n            }\n        }\n    });\n\n    for (let i=0; i<xyz.length; i++) {\n        if (mode.charAt(i) === 'h') {\n            let A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n            while (A < 0) A += 360;\n            while (A >= 360) A -= 360;\n            xyz[i] = A;\n        } else {\n            xyz[i] = xyz[i]/cnt[i];\n        }\n    }\n    alpha /= l;\n    return (new Color(xyz, mode)).alpha(alpha > 0.99999 ? 1 : alpha, true);\n};\n\n\nconst _average_lrgb = (colors, weights) => {\n    const l = colors.length;\n    const xyz = [0,0,0,0];\n    for (let i=0; i < colors.length; i++) {\n        const col = colors[i];\n        const f = weights[i] / l;\n        const rgb = col._rgb;\n        xyz[0] += pow(rgb[0],2) * f;\n        xyz[1] += pow(rgb[1],2) * f;\n        xyz[2] += pow(rgb[2],2) * f;\n        xyz[3] += rgb[3] * f;\n    }\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n    if (xyz[3] > 0.9999999) xyz[3] = 1;\n    return new Color(clip_rgb(xyz));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}